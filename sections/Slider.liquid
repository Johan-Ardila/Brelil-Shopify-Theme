{% comment %}
  Slider Responsivo con Slick para Shopify - Versión Simplificada
  - Soporte para imágenes diferentes en móvil y escritorio
  - Navegación con dots y flechas
  - Autoplay configurable
{% endcomment %}

<div class="banner-container">
  {% if section.settings.heading != blank %}
    <h2 class="banner-heading">{{ section.settings.heading }}</h2>
  {% endif %}
  
  <div class="slider">
    {% for block in section.blocks %}
      <div class="slide" {{ block.shopify_attributes }}>
        <a href="{{ block.settings.link }}">
          {% if block.settings.desktop_image != blank %}
            <img 
              class="desktop-image hidden-mobile" 
              src="{{ block.settings.desktop_image | img_url: 'master' }}" 
              alt="{{ block.settings.desktop_image.alt | escape }}"
              loading="lazy"
            >
          {% endif %}
          
          {% if block.settings.mobile_image != blank %}
            <img 
              class="mobile-image hidden-desktop" 
              src="{{ block.settings.mobile_image | img_url: 'master' }}" 
              alt="{{ block.settings.mobile_image.alt | escape }}"
              loading="lazy"
            >
          {% endif %}
        </a>
      </div>
    {% endfor %}
  </div>
</div>

{% style %}
  .banner-container {
    width: 100%;
    position: relative;
    margin-bottom: 30px;
  }
  
  .banner-heading {
    text-align: center;
    margin-bottom: 20px;
  }
  
  .slider img {
    width: 100%;
    height: auto;
    display: block;
  }
  
  .hidden-mobile {
    display: none;
  }
  
  .hidden-desktop {
    display: block;
  }
  
  /* Media queries */
  @media (min-width: 769px) {
    .hidden-mobile {
      display: block;
    }

    .hidden-desktop {
      display: none;
    }
  }
  
  /* Estilos para los dots y flechas del slider */
  .slick-dots {
    bottom: 15px;
  }
  
  .slick-dots li button:before {
    color: white;
    opacity: 0.8;
  }
  
  .slick-dots li.slick-active button:before {
    color: white;
    opacity: 1;
  }
  
  .slick-prev, .slick-next {
    z-index: 1;
  }
  
  .slick-prev {
    left: 10px;
  }
  
  .slick-next {
    right: 10px;
  }
  
  .slick-prev:before, .slick-next:before {
    font-size: 30px;
    opacity: 0.8;
  }
{% endstyle %}

<!-- Incluir jQuery antes de Slick -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Incluir Slick Slider JS y CSS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">

<script>
  $(document).ready(function(){
    $('.slider').slick({
      dots: true,
      arrows: true,
      infinite: true,
      speed: 500,
      slidesToShow: 1,
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: 5000,
      responsive: [{
        breakpoint: 768,
        settings: {
          arrows: false
        }
      }]
    });
  });
</script>

{% schema %}
{
  "name": "Slider Responsivo",
  "tag": "section",
  "class": "slider-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Encabezado",
      "default": "Nuestros destacados"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "limit": 10,
      "settings": [
        {
          "type": "image_picker",
          "id": "desktop_image",
          "label": "Imagen para Escritorio"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "Imagen para Móvil"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Enlace",
          "default": "/collections/all"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Slider Responsivo",
      "category": "Imagen",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}